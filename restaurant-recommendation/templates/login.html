{% extends "base.html" %}
{% block title %}Login | Restaurant Finder{% endblock %}
{% block content %}

<section class="auth-page gradient-bg">
  <div class="auth-container">
    <h1 class="heading">Welcome Back</h1>
    <p class="intro">Log in to continue discovering great restaurants.</p>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flash-container">
          {% for category, message in messages %}
            <div class="flash {{ category }}">{{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <div class="form-box">
      <form method="post" action="{{ url_for('auth_page') }}" id="loginForm">
        <input type="hidden" name="form_type" value="login">

        <label for="login_user">Username or Email</label>
        <div class="input-icon">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.8" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.8" d="M4.5 20.25a8.25 8.25 0 0115 0"/></svg>
          <input type="text" name="username" id="login_user" required>
        </div>

        <label for="login_pass">Password</label>
        <div class="input-icon">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="3" y="11" width="18" height="10" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <input type="password" name="password" id="login_pass" required>
        </div>

        <button type="submit">âœ… Login</button>
      </form>
      <p class="toggle">New here? <a href="{{ url_for('signup_page') }}">Create your account</a></p>
    </div>
  </div>
</section>

<style>
.auth-page { background: url("/static/images/restaurant-bg.jpg") no-repeat center center fixed; background-size: cover; min-height: 100vh; display: flex; justify-content: center; align-items: center; padding: 40px 20px; position: relative; }
.gradient-bg::before { content: ""; position: absolute; inset: 0; background: linear-gradient(135deg, rgba(242,232,196,0.92), rgba(255,79,0,0.24)); }
.auth-container { background: rgba(255,255,255,0.98); padding: 30px; border-radius: 18px; max-width: 520px; width: 100%; text-align: center; box-shadow: 0 18px 44px rgba(0,0,0,0.22); border: 1px solid rgba(0,0,0,0.06); backdrop-filter: saturate(1.1); }
.heading { color: var(--royal); margin-bottom: 10px; font-weight: 700; font-size: 30px; letter-spacing: -0.01em; }
.auth-container .intro { margin-bottom: 16px; color: var(--muted-text); }
.flash-container { margin-bottom: 16px; }
.flash { padding: 10px; border-radius: 8px; margin: 6px 0; }
.flash.success { background: #e8f5e9; color: var(--shamrock); border: 1px solid rgba(46,125,50,0.2); }
.flash.error { background: #ffebee; color: #b71c1c; border: 1px solid rgba(183,28,28,0.2); }
.form-box { margin: 8px 0; padding: 20px; border-radius: 14px; background: #fff; box-shadow: 0 10px 24px rgba(0,0,0,0.08); text-align: left; }
label { font-weight: 600; color: var(--royal); font-size: 16px; }
.input-icon { position: relative; display: flex; align-items: center; }
.input-icon .icon { position: absolute; left: 12px; width: 20px; height: 20px; color: #9ca3af; pointer-events: none; }
.input-icon input { width: 100%; margin: 8px 0 16px; padding: 14px 12px 14px 44px; border-radius: 12px; border: 1px solid #cfd6dd; background: #ffffff; transition: box-shadow .2s, border-color .2s; font-size: 16px; color: #111827; }
.input-icon input::placeholder { color: #9ca3af; }
.input-icon input:focus { outline: none; box-shadow: 0 0 0 3px rgba(217,130,43,0.2); }
button { width: 100%; padding: 12px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; color: #fff; background: var(--space-orange); transition: transform 0.2s, background 0.3s; box-shadow: 0 4px 12px rgba(217,130,43,0.25); }
button:hover { background: var(--space-orange-700); transform: translateY(-1px); }
.toggle { margin-top: 8px; text-align: center; }
</style>

<script>
document.getElementById('loginForm')?.addEventListener('submit', function(e) {
  var u = document.getElementById('login_user').value.trim();
  var p = document.getElementById('login_pass').value.trim();
  if (!u || !p) { e.preventDefault(); }
});
</script>

{% endblock %}


