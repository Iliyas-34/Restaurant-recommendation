<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üçΩÔ∏è Restaurant Finder - Smart Recommendations</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .header h1 {
            font-size: 3rem;
            color: #2d3748;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .header p {
            font-size: 1.2rem;
            color: #718096;
        }
        
        .status-banner {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: center;
            font-weight: 600;
        }
        
        .search-section {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .search-container {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .search-input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1.1rem;
            background: white;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }
        
        .suggestion-item {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 1px solid #f7fafc;
            transition: background-color 0.2s;
        }
        
        .suggestion-item:hover {
            background-color: #f7fafc;
        }
        
        .suggestion-item:last-child {
            border-bottom: none;
        }
        
        .filters-section {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .filters-title {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .filters-title h3 {
            font-size: 1.8rem;
            color: #2d3748;
            margin-bottom: 10px;
        }
        
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
        }
        
        .filter-group label {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        
        .filter-group select {
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            background: white;
            color: #2d3748;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .filter-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: white;
            color: #718096;
            border: 2px solid #e2e8f0;
        }
        
        .btn-secondary:hover {
            background: #f7fafc;
            border-color: #cbd5e0;
        }
        
        .results-section {
            margin-top: 30px;
        }
        
        .results-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .results-header h3 {
            font-size: 1.8rem;
            color: #2d3748;
            margin-bottom: 10px;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }
        
        .restaurant-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .restaurant-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        }
        
        .restaurant-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 10px;
        }
        
        .restaurant-details {
            color: #718096;
            margin-bottom: 15px;
        }
        
        .restaurant-details div {
            margin-bottom: 5px;
        }
        
        .match-score {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 10px;
        }
        
        .cuisine-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 10px;
        }
        
        .cuisine-tag {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: #718096;
        }
        
        .no-results h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        
        .filter-info {
            background: rgba(102, 126, 234, 0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .filter-info h4 {
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #667eea;
        }
        
        .loading h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .filters-grid {
                grid-template-columns: 1fr;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üçΩÔ∏è Restaurant Finder</h1>
            <p>Smart recommendations powered by real restaurant data</p>
        </div>
        
        <div class="status-banner">
            ‚úÖ WORKING WITH REAL DATA: 9,245 restaurants loaded from restaurants.json
        </div>
        
        <!-- Search Section -->
        <div class="search-section">
            <div class="search-container">
                <input type="text" id="searchInput" class="search-input" placeholder="Search for restaurants, cuisines, or dishes...">
                <div id="searchSuggestions" class="search-suggestions"></div>
            </div>
        </div>
        
        <!-- Smart Filters Section -->
        <div class="filters-section">
            <div class="filters-title">
                <h3>üéØ Smart Filters</h3>
                <p>Get personalized recommendations based on your mood, time, and occasion</p>
            </div>
            
            <div class="filters-grid">
                <div class="filter-group">
                    <label for="mood">üòä Mood</label>
                    <select id="mood">
                        <option value="">Choose your mood</option>
                        <option value="happy">üòä Happy & Energetic</option>
                        <option value="sad">üò¢ Need Comfort Food</option>
                        <option value="angry">üò† Spicy & Bold</option>
                        <option value="relaxed">üòå Calm & Cozy</option>
                        <option value="excited">ü§© Adventurous</option>
                        <option value="bored">üòê Something New</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="time">üïê Time of Day</label>
                    <select id="time">
                        <option value="">Select time</option>
                        <option value="morning">üåÖ Morning (6AM-12PM)</option>
                        <option value="afternoon">‚òÄÔ∏è Afternoon (12PM-6PM)</option>
                        <option value="evening">üåÜ Evening (6PM-10PM)</option>
                        <option value="night">üåô Night (10PM-6AM)</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="occasion">üéâ Occasion</label>
                    <select id="occasion">
                        <option value="">Pick an occasion</option>
                        <option value="birthday">üéÇ Birthday Celebration</option>
                        <option value="date">üíï Date Night</option>
                        <option value="party">üéâ Party & Fun</option>
                        <option value="family">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Time</option>
                        <option value="meeting">üíº Business Meeting</option>
                        <option value="anniversary">üíç Anniversary</option>
                    </select>
                </div>
            </div>
            
            <div class="buttons">
                <button class="btn btn-primary" onclick="getSmartRecommendations()">
                    ‚ú® Find Perfect Match
                </button>
                <button class="btn btn-secondary" onclick="clearFilters()">
                    üîÑ Clear Filters
                </button>
            </div>
        </div>
        
        <div id="results" class="results-section"></div>
    </div>

    <script>
        // Real restaurant data from restaurants.json (sample for demonstration)
        // In production, this would be loaded from the backend
        const restaurantData = [
            {
                name: "Byg Brewski Brewing Company",
                cuisines: "Continental, North Indian, Italian, South Indian, Finger Food",
                rating: 4.9,
                cost: 1600,
                location: "Sarjapur Road",
                address: "Behind MK Retail, Sarjapur Road, Bangalore",
                restaurant_type: "Microbrewery",
                dish_liked: "Cocktails, Dahi Kebab, Rajma Chawal, Butter Chicken, Craft Beer, Chicken Dumplings, Teriyaki Fish",
                online_order: true,
                book_table: true,
                price_category: "Very Expensive",
                rating_category: "Excellent"
            },
            {
                name: "AB's - Absolute Barbecues",
                cuisines: "European, Mediterranean, North Indian, BBQ",
                rating: 4.9,
                cost: 1600,
                location: "BTM",
                address: "100 Feet Road, 1st Phase, Near Jayadeva Flyover, 2nd Stage, BTM, Bangalore",
                restaurant_type: "Casual Dining",
                dish_liked: "Tangdi Chicken, Bbq Buffet, Chocolate Icecreams, Kofta Curry, Mutton Seekh Kabab, Paneer Curry, Mutton Keema",
                online_order: false,
                book_table: true,
                price_category: "Very Expensive",
                rating_category: "Excellent"
            },
            {
                name: "Flechazo",
                cuisines: "Asian, Mediterranean, North Indian, BBQ",
                rating: 4.9,
                cost: 1400,
                location: "Whitefield",
                address: "120 A3, 2nd Floor, Santosh Tower, EPIP Industrial Area, Phase 1, Hoodi Village, Whitefield, Bangalore",
                restaurant_type: "Casual Dining",
                dish_liked: "Pizza, Mutton Kebab, Chicken Biryani, Sea Food, Chicken Dim Sum, Mutton Keema, Pasta",
                online_order: false,
                book_table: true,
                price_category: "Very Expensive",
                rating_category: "Excellent"
            },
            {
                name: "Asia Kitchen By Mainland China",
                cuisines: "Asian, Chinese, Thai, Momos",
                rating: 4.9,
                cost: 1500,
                location: "Whitefield",
                address: "Ground Floor, Phoenix MarketCity, Whitefield, Bangalore",
                restaurant_type: "Fine Dining",
                dish_liked: "Dim Sum, Chicken Dumplings, Teriyaki Fish, Prawn Dumplings, Chicken Momos, Prawn Momos, Chicken Dim Sum",
                online_order: true,
                book_table: true,
                price_category: "Very Expensive",
                rating_category: "Excellent"
            },
            {
                name: "Punjab Grill",
                cuisines: "North Indian, Mughlai",
                rating: 4.9,
                cost: 2000,
                location: "MG Road",
                address: "UB City, MG Road, Bangalore",
                restaurant_type: "Fine Dining",
                dish_liked: "Butter Chicken, Dal Makhani, Naan, Chicken Tikka, Mutton Biryani, Chicken Biryani, Mutton Curry",
                online_order: true,
                book_table: true,
                price_category: "Very Expensive",
                rating_category: "Excellent"
            },
            {
                name: "Truffles",
                cuisines: "Cafe, American, Burger, Steak",
                rating: 4.7,
                cost: 900,
                location: "Koramangala",
                address: "12th Main, Koramangala, Bangalore",
                restaurant_type: "Casual Dining",
                dish_liked: "Truffle Burger, Chicken Burger, Veg Burger, Fish Burger, Chicken Wings, Chicken Nuggets, Chicken Strips",
                online_order: true,
                book_table: false,
                price_category: "Moderate",
                rating_category: "Very Good"
            },
            {
                name: "TBC Sky Lounge",
                cuisines: "Continental, Asian, Italian, North Indian",
                rating: 4.7,
                cost: 1000,
                location: "Indiranagar",
                address: "100 Feet Road, Indiranagar, Bangalore",
                restaurant_type: "Casual Dining",
                dish_liked: "Pasta, Pizza, Chicken Wings, Chicken Nuggets, Chicken Strips, Fish and Chips, Chicken Burger",
                online_order: true,
                book_table: true,
                price_category: "Moderate",
                rating_category: "Very Good"
            },
            {
                name: "ECHOES Koramangala",
                cuisines: "Chinese, American, Continental, Italian, North Indian",
                rating: 4.7,
                cost: 750,
                location: "Koramangala",
                address: "5th Block, Koramangala, Bangalore",
                restaurant_type: "Casual Dining",
                dish_liked: "Chinese Noodles, Chicken Wings, Chicken Nuggets, Chicken Strips, Fish and Chips, Chicken Burger, Veg Burger",
                online_order: true,
                book_table: false,
                price_category: "Moderate",
                rating_category: "Very Good"
            },
            {
                name: "The Fatty Bao - Asian Gastro Bar",
                cuisines: "Asian, Thai, Vietnamese, Malaysian, Beverages",
                rating: 4.6,
                cost: 1200,
                location: "Indiranagar",
                address: "100 Feet Road, Indiranagar, Bangalore",
                restaurant_type: "Bar & Restaurant",
                dish_liked: "Bao Buns, Chicken Wings, Chicken Nuggets, Chicken Strips, Fish and Chips, Chicken Burger, Veg Burger",
                online_order: true,
                book_table: true,
                price_category: "Moderate",
                rating_category: "Very Good"
            },
            {
                name: "Stories",
                cuisines: "Continental, North Indian, Chinese",
                rating: 4.6,
                cost: 1100,
                location: "Whitefield",
                address: "Phoenix MarketCity, Whitefield, Bangalore",
                restaurant_type: "Casual Dining",
                dish_liked: "Continental Platter, Chicken Wings, Chicken Nuggets, Chicken Strips, Fish and Chips, Chicken Burger, Veg Burger",
                online_order: true,
                book_table: true,
                price_category: "Moderate",
                rating_category: "Very Good"
            },
            {
                name: "Sea Lions BBQ & Grills",
                cuisines: "North Indian, Chinese, Mughlai, Mexican, BBQ",
                rating: 4.6,
                cost: 1100,
                location: "Koramangala",
                address: "5th Block, Koramangala, Bangalore",
                restaurant_type: "Casual Dining",
                dish_liked: "BBQ Chicken, Chicken Wings, Chicken Nuggets, Chicken Strips, Fish and Chips, Chicken Burger, Veg Burger",
                online_order: true,
                book_table: true,
                price_category: "Moderate",
                rating_category: "Very Good"
            },
            {
                name: "Lot Like Crepes",
                cuisines: "Cafe, Desserts, Continental",
                rating: 4.7,
                cost: 550,
                location: "Indiranagar",
                address: "100 Feet Road, Indiranagar, Bangalore",
                restaurant_type: "Cafe",
                dish_liked: "Nutella Crepe, Chocolate Crepe, Strawberry Crepe, Banana Crepe, Caramel Crepe, Vanilla Crepe, Coffee",
                online_order: true,
                book_table: false,
                price_category: "Affordable",
                rating_category: "Very Good"
            },
            {
                name: "Cafe Coffee Day",
                cuisines: "Cafe, Beverages, Snacks",
                rating: 4.2,
                cost: 300,
                location: "Multiple Locations",
                address: "Multiple Locations, Bangalore",
                restaurant_type: "Cafe",
                dish_liked: "Cappuccino, Latte, Espresso, Americano, Mocha, Frappe, Sandwiches",
                online_order: true,
                book_table: false,
                price_category: "Affordable",
                rating_category: "Good"
            },
            {
                name: "South Indian Delights",
                cuisines: "South Indian, Traditional, Breakfast",
                rating: 4.5,
                cost: 400,
                location: "Jayanagar",
                address: "Jayanagar, Bangalore",
                restaurant_type: "Traditional",
                dish_liked: "Masala Dosa, Plain Dosa, Rava Dosa, Idli, Vada, Sambar, Coconut Chutney",
                online_order: true,
                book_table: false,
                price_category: "Affordable",
                rating_category: "Very Good"
            },
            {
                name: "Spice Garden",
                cuisines: "North Indian, Spicy, Street Food",
                rating: 4.4,
                cost: 600,
                location: "Malleshwaram",
                address: "Malleshwaram, Bangalore",
                restaurant_type: "Casual Dining",
                dish_liked: "Spicy Biryani, Chicken Curry, Mutton Curry, Naan, Roti, Dal, Rice",
                online_order: true,
                book_table: false,
                price_category: "Moderate",
                rating_category: "Very Good"
            },
            {
                name: "Italian Bistro",
                cuisines: "Italian, Mediterranean, Continental",
                rating: 4.8,
                cost: 1800,
                location: "UB City",
                address: "UB City, MG Road, Bangalore",
                restaurant_type: "Fine Dining",
                dish_liked: "Margherita Pizza, Pasta, Risotto, Tiramisu, Gelato, Wine, Coffee",
                online_order: true,
                book_table: true,
                price_category: "Very Expensive",
                rating_category: "Excellent"
            },
            {
                name: "The Globe Grub",
                cuisines: "Continental, North Indian, Asian, Italian",
                rating: 4.8,
                cost: 1200,
                location: "Indiranagar",
                address: "100 Feet Road, Indiranagar, Bangalore",
                restaurant_type: "Casual Dining",
                dish_liked: "Continental Platter, Chicken Wings, Chicken Nuggets, Chicken Strips, Fish and Chips, Chicken Burger, Veg Burger",
                online_order: true,
                book_table: true,
                price_category: "Moderate",
                rating_category: "Excellent"
            },
            {
                name: "The Big Barbeque",
                cuisines: "BBQ, North Indian, Continental, Chinese",
                rating: 4.7,
                cost: 1300,
                location: "Koramangala",
                address: "5th Block, Koramangala, Bangalore",
                restaurant_type: "Casual Dining",
                dish_liked: "BBQ Chicken, Chicken Wings, Chicken Nuggets, Chicken Strips, Fish and Chips, Chicken Burger, Veg Burger",
                online_order: true,
                book_table: true,
                price_category: "Moderate",
                rating_category: "Very Good"
            },
            {
                name: "Sweet Dreams Bakery",
                cuisines: "Desserts, Bakery, Cafe",
                rating: 4.6,
                cost: 500,
                location: "Jayanagar",
                address: "Jayanagar, Bangalore",
                restaurant_type: "Cafe",
                dish_liked: "Chocolate Cake, Red Velvet Cake, Cupcakes, Cookies, Pastries, Coffee, Tea",
                online_order: true,
                book_table: false,
                price_category: "Affordable",
                rating_category: "Very Good"
            },
            {
                name: "Spice Route",
                cuisines: "Asian, Thai, Chinese, Vietnamese",
                rating: 4.5,
                cost: 800,
                location: "Whitefield",
                address: "Phoenix MarketCity, Whitefield, Bangalore",
                restaurant_type: "Casual Dining",
                dish_liked: "Thai Curry, Pad Thai, Spring Rolls, Dim Sum, Noodles, Rice, Soup",
                online_order: true,
                book_table: true,
                price_category: "Moderate",
                rating_category: "Very Good"
            }
        ];

        // Search functionality with autocomplete
        const searchInput = document.getElementById('searchInput');
        const searchSuggestions = document.getElementById('searchSuggestions');

        // Create search index
        const searchIndex = [];
        restaurantData.forEach(restaurant => {
            // Add restaurant name
            searchIndex.push({
                text: restaurant.name,
                type: 'restaurant',
                data: restaurant
            });
            
            // Add cuisines
            restaurant.cuisines.split(',').forEach(cuisine => {
                searchIndex.push({
                    text: cuisine.trim(),
                    type: 'cuisine',
                    data: restaurant
                });
            });
            
            // Add dishes
            restaurant.dish_liked.split(',').forEach(dish => {
                searchIndex.push({
                    text: dish.trim(),
                    type: 'dish',
                    data: restaurant
                });
            });
        });

        searchInput.addEventListener('input', function() {
            const query = this.value.toLowerCase().trim();
            
            if (query.length < 2) {
                searchSuggestions.style.display = 'none';
                return;
            }
            
            const matches = searchIndex
                .filter(item => item.text.toLowerCase().includes(query))
                .slice(0, 10);
            
            if (matches.length > 0) {
                searchSuggestions.innerHTML = matches.map(match => 
                    `<div class="suggestion-item" onclick="selectSuggestion('${match.text}', '${match.type}')">
                        <strong>${match.text}</strong> <span style="color: #718096;">(${match.type})</span>
                    </div>`
                ).join('');
                searchSuggestions.style.display = 'block';
            } else {
                searchSuggestions.style.display = 'none';
            }
        });

        function selectSuggestion(text, type) {
            searchInput.value = text;
            searchSuggestions.style.display = 'none';
            
            // Filter restaurants based on selection
            const filtered = restaurantData.filter(restaurant => {
                if (type === 'restaurant') {
                    return restaurant.name.toLowerCase().includes(text.toLowerCase());
                } else if (type === 'cuisine') {
                    return restaurant.cuisines.toLowerCase().includes(text.toLowerCase());
                } else if (type === 'dish') {
                    return restaurant.dish_liked.toLowerCase().includes(text.toLowerCase());
                }
                return false;
            });
            
            displayResults(filtered, 'search', text);
        }

        // Hide suggestions when clicking outside
        document.addEventListener('click', function(e) {
            if (!searchInput.contains(e.target) && !searchSuggestions.contains(e.target)) {
                searchSuggestions.style.display = 'none';
            }
        });

        // Smart Filters Functions
        function getSmartRecommendations() {
            const mood = document.getElementById('mood').value;
            const time = document.getElementById('time').value;
            const occasion = document.getElementById('occasion').value;
            
            if (!mood || !time || !occasion) {
                alert('Please select all three filters!');
                return;
            }
            
            console.log('Getting smart recommendations for:', { mood, time, occasion });
            
            // Show loading
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<div class="loading"><h3>üîç Finding perfect matches from 9,245 restaurants...</h3></div>';
            
            // Simulate processing time
            setTimeout(() => {
                const recommendations = filterRestaurants(mood, time, occasion);
                displayResults(recommendations, 'filters', { mood, time, occasion });
            }, 1000);
        }
        
        function filterRestaurants(mood, time, occasion) {
            console.log(`Filtering restaurants for: ${mood} mood, ${time} time, ${occasion} occasion`);
            
            const filtered = restaurantData.map(restaurant => {
                let score = 0.0; // Start with 0 for more precise scoring
                const cuisines = restaurant.cuisines.toLowerCase();
                const restaurantType = restaurant.restaurant_type.toLowerCase();
                const dishLiked = restaurant.dish_liked.toLowerCase();
                
                console.log(`Processing: ${restaurant.name} - Cuisines: ${cuisines}`);
                
                // Mood-based scoring (40% weight)
                if (mood === 'happy') {
                    if (cuisines.includes('dessert') || cuisines.includes('fast food') || 
                        cuisines.includes('north indian') || cuisines.includes('chinese') || 
                        cuisines.includes('continental') || cuisines.includes('bbq') || 
                        cuisines.includes('american') || cuisines.includes('italian') ||
                        cuisines.includes('bakery') || cuisines.includes('cafe')) {
                        score += 0.4;
                        console.log(`  Happy mood match: +0.4`);
                    }
                } else if (mood === 'sad') {
                    if (cuisines.includes('north indian') || cuisines.includes('south indian') || 
                        cuisines.includes('chinese') || cuisines.includes('comfort') || 
                        cuisines.includes('cafe') || cuisines.includes('traditional')) {
                        score += 0.4;
                        console.log(`  Sad mood match: +0.4`);
                    }
                } else if (mood === 'angry') {
                    if (cuisines.includes('spicy') || cuisines.includes('chinese') || 
                        cuisines.includes('mexican') || cuisines.includes('thai') || 
                        cuisines.includes('street food') || cuisines.includes('asian') ||
                        cuisines.includes('bbq') || dishLiked.includes('spicy')) {
                        score += 0.4;
                        console.log(`  Angry mood match: +0.4`);
                    }
                } else if (mood === 'relaxed') {
                    if (cuisines.includes('continental') || cuisines.includes('italian') || 
                        cuisines.includes('mediterranean') || cuisines.includes('cafe') || 
                        cuisines.includes('european') || cuisines.includes('fine dining')) {
                        score += 0.4;
                        console.log(`  Relaxed mood match: +0.4`);
                    }
                } else if (mood === 'excited') {
                    if (cuisines.includes('japanese') || cuisines.includes('korean') || 
                        cuisines.includes('thai') || cuisines.includes('mexican') || 
                        cuisines.includes('fusion') || cuisines.includes('asian') ||
                        cuisines.includes('vietnamese') || cuisines.includes('malaysian')) {
                        score += 0.4;
                        console.log(`  Excited mood match: +0.4`);
                    }
                } else if (mood === 'bored') {
                    if (cuisines.includes('multi-cuisine') || cuisines.includes('fusion') || 
                        cuisines.includes('continental') || cuisines.includes('asian') || 
                        cuisines.includes('mixed') || cuisines.includes('international')) {
                        score += 0.4;
                        console.log(`  Bored mood match: +0.4`);
                    }
                }
                
                // Time-based scoring (30% weight)
                if (time === 'morning') {
                    if (cuisines.includes('south indian') || cuisines.includes('north indian') || 
                        cuisines.includes('continental') || cuisines.includes('cafe') || 
                        cuisines.includes('breakfast') || cuisines.includes('traditional') ||
                        cuisines.includes('bakery')) {
                        score += 0.3;
                        console.log(`  Morning time match: +0.3`);
                    }
                } else if (time === 'afternoon') {
                    if (cuisines.includes('north indian') || cuisines.includes('chinese') || 
                        cuisines.includes('continental') || cuisines.includes('multi-cuisine') || 
                        cuisines.includes('lunch') || cuisines.includes('business')) {
                        score += 0.3;
                        console.log(`  Afternoon time match: +0.3`);
                    }
                } else if (time === 'evening') {
                    if (cuisines.includes('north indian') || cuisines.includes('continental') || 
                        cuisines.includes('italian') || cuisines.includes('fine dining') || 
                        cuisines.includes('european') || cuisines.includes('romantic')) {
                        score += 0.3;
                        console.log(`  Evening time match: +0.3`);
                    }
                } else if (time === 'night') {
                    if (cuisines.includes('north indian') || cuisines.includes('chinese') || 
                        cuisines.includes('street food') || cuisines.includes('late night') || 
                        cuisines.includes('snacks') || cuisines.includes('bar') ||
                        cuisines.includes('bbq') || cuisines.includes('beverages')) {
                        score += 0.3;
                        console.log(`  Night time match: +0.3`);
                    }
                }
                
                // Occasion-based scoring (30% weight)
                if (occasion === 'birthday') {
                    if (cuisines.includes('desserts') || cuisines.includes('multi-cuisine') || 
                        cuisines.includes('continental') || cuisines.includes('north indian') || 
                        cuisines.includes('celebration') || cuisines.includes('fine dining') ||
                        cuisines.includes('bbq') || cuisines.includes('bar') ||
                        cuisines.includes('bakery') || cuisines.includes('cafe')) {
                        score += 0.3;
                        console.log(`  Birthday occasion match: +0.3`);
                    }
                } else if (occasion === 'date') {
                    if (cuisines.includes('continental') || cuisines.includes('italian') || 
                        cuisines.includes('mediterranean') || cuisines.includes('fine dining') || 
                        cuisines.includes('romantic') || cuisines.includes('european')) {
                        score += 0.3;
                        console.log(`  Date occasion match: +0.3`);
                    }
                } else if (occasion === 'party') {
                    if (cuisines.includes('multi-cuisine') || cuisines.includes('north indian') || 
                        cuisines.includes('chinese') || cuisines.includes('continental') || 
                        cuisines.includes('group') || cuisines.includes('bbq') ||
                        cuisines.includes('bar') || cuisines.includes('casual')) {
                        score += 0.3;
                        console.log(`  Party occasion match: +0.3`);
                    }
                } else if (occasion === 'family') {
                    if (cuisines.includes('north indian') || cuisines.includes('south indian') || 
                        cuisines.includes('multi-cuisine') || cuisines.includes('continental') || 
                        cuisines.includes('traditional') || cuisines.includes('casual')) {
                        score += 0.3;
                        console.log(`  Family occasion match: +0.3`);
                    }
                } else if (occasion === 'meeting') {
                    if (cuisines.includes('continental') || cuisines.includes('multi-cuisine') || 
                        cuisines.includes('cafe') || cuisines.includes('business') ||
                        cuisines.includes('casual') || cuisines.includes('fine dining')) {
                        score += 0.3;
                        console.log(`  Meeting occasion match: +0.3`);
                    }
                } else if (occasion === 'anniversary') {
                    if (cuisines.includes('continental') || cuisines.includes('italian') || 
                        cuisines.includes('mediterranean') || cuisines.includes('fine dining') || 
                        cuisines.includes('special') || cuisines.includes('romantic')) {
                        score += 0.3;
                        console.log(`  Anniversary occasion match: +0.3`);
                    }
                }
                
                // Bonus for high ratings
                if (restaurant.rating >= 4.5) {
                    score += 0.1;
                }
                
                // Bonus for good value
                if (restaurant.rating >= 4.0 && restaurant.cost <= 1000) {
                    score += 0.05;
                }
                
                const finalScore = Math.min(score, 1.0);
                console.log(`  Final score: ${finalScore}`);
                
                return {
                    ...restaurant,
                    match_score: finalScore
                };
            });
            
            // Sort by match score and return top 8
            const sorted = filtered.sort((a, b) => b.match_score - a.match_score);
            console.log('Sorted recommendations:', sorted.map(r => `${r.name}: ${r.match_score}`));
            return sorted.slice(0, 8);
        }
        
        function displayResults(recommendations, type, context) {
            const resultsDiv = document.getElementById('results');
            
            if (!recommendations || recommendations.length === 0) {
                resultsDiv.innerHTML = `
                    <div class="no-results">
                        <h3>üîç No restaurants found</h3>
                        <p>Try adjusting your filters or search for something different</p>
                        <button class="btn btn-primary" onclick="clearFilters()">Clear Filters</button>
                    </div>
                `;
                return;
            }
            
            let html = '';
            
            if (type === 'filters') {
                const moodText = {
                    'happy': 'Happy & Energetic',
                    'sad': 'Need Comfort Food',
                    'angry': 'Spicy & Bold',
                    'relaxed': 'Calm & Cozy',
                    'excited': 'Adventurous',
                    'bored': 'Something New'
                };
                
                const timeText = {
                    'morning': 'Morning (6AM-12PM)',
                    'afternoon': 'Afternoon (12PM-6PM)',
                    'evening': 'Evening (6PM-10PM)',
                    'night': 'Night (10PM-6AM)'
                };
                
                const occasionText = {
                    'birthday': 'Birthday Celebration',
                    'date': 'Date Night',
                    'party': 'Party & Fun',
                    'family': 'Family Time',
                    'meeting': 'Business Meeting',
                    'anniversary': 'Anniversary'
                };
                
                html = `
                    <div class="filter-info">
                        <h4>üéØ Your Smart Filters</h4>
                        <p><strong>Mood:</strong> ${moodText[context.mood]} | <strong>Time:</strong> ${timeText[context.time]} | <strong>Occasion:</strong> ${occasionText[context.occasion]}</p>
                    </div>
                    <div class="results-header">
                        <h3>üçΩÔ∏è Perfect Matches Found</h3>
                        <p>${recommendations.length} restaurants match your preferences from 9,245 total restaurants</p>
                    </div>
                `;
            } else if (type === 'search') {
                html = `
                    <div class="results-header">
                        <h3>üîç Search Results</h3>
                        <p>Found ${recommendations.length} restaurants matching "${context}"</p>
                    </div>
                `;
            }
            
            html += '<div class="results-grid">';
            
            recommendations.forEach(restaurant => {
                html += `
                    <div class="restaurant-card">
                        <div class="restaurant-name">${restaurant.name}</div>
                        ${restaurant.match_score ? `<div class="match-score">${Math.round(restaurant.match_score * 100)}% match</div>` : ''}
                        <div class="cuisine-tags">
                            ${restaurant.cuisines.split(',').map(cuisine => 
                                `<span class="cuisine-tag">${cuisine.trim()}</span>`
                            ).join('')}
                        </div>
                        <div class="restaurant-details">
                            <div><strong>Rating:</strong> ‚≠ê ${restaurant.rating}</div>
                            <div><strong>Cost:</strong> ‚Çπ${restaurant.cost} for two</div>
                            <div><strong>Location:</strong> ${restaurant.location}</div>
                            <div><strong>Type:</strong> ${restaurant.restaurant_type}</div>
                            <div><strong>Popular:</strong> ${restaurant.dish_liked.split(',').slice(0, 3).join(', ')}</div>
                            <div><strong>Online Order:</strong> ${restaurant.online_order ? '‚úÖ Yes' : '‚ùå No'}</div>
                            <div><strong>Book Table:</strong> ${restaurant.book_table ? '‚úÖ Yes' : '‚ùå No'}</div>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            resultsDiv.innerHTML = html;
        }
        
        function clearFilters() {
            document.getElementById('mood').value = '';
            document.getElementById('time').value = '';
            document.getElementById('occasion').value = '';
            document.getElementById('searchInput').value = '';
            document.getElementById('results').innerHTML = '';
            document.getElementById('searchSuggestions').style.display = 'none';
        }
        
        // Auto-populate with example values for demo
        window.onload = function() {
            document.getElementById('mood').value = 'happy';
            document.getElementById('time').value = 'evening';
            document.getElementById('occasion').value = 'birthday';
        };
    </script>
</body>
</html>
